(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t,a){},115:function(e,t,a){},146:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(19),c=a.n(s),o=(a(113),a(114),a(115),a(116),a(7)),i=a(9),l=a(11),u=a(10),d=a(42),p=a(14),h=a(3),j=a.n(h),m=a(6),b=a(16),f=a(96),v=a.n(f),O=(a(69),a(20)),g=(a(63),function e(){Object(o.a)(this,e)});g.toggleStar=function(){var e=Object(m.a)(j.a.mark((function e(t,a){var n,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("starred",a),r={method:"PATCH",headers:{Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors",body:n},e.next=5,fetch(t,r);case 5:return s=e.sent,e.abrupt("return",s.json());case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g.getContact=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors"},e.next=3,fetch(t,a);case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.editContact=function(){var e=Object(m.a)(j.a.mark((function e(t,a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors",body:JSON.stringify({firstName:a.firstName,lastName:a.lastName,emailAddress:a.email,organisation:a.organisation,role:a.role,phoneNumber:a.phone})},e.next=3,fetch(t,n);case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var x=function e(){Object(o.a)(this,e)};x.getGroups=Object(m.a)(j.a.mark((function e(){var t,a,n,r,s,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors"},e.next=3,fetch("https://team-69-backend.herokuapp.com/crm/groups/",t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,r=0;case 8:if(!(r<n.length)){e.next=23;break}(s=n[r]).contactObjects=[],c=0;case 12:if(!(c<s.contacts.length)){e.next=20;break}return e.next=15,g.getContact(s.contacts[c]);case 15:o=e.sent,s.contactObjects.push(o);case 17:c++,e.next=12;break;case 20:r++,e.next=8;break;case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e)})));var w=a(265),C=a(268),k=a(1),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).toggleStar=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.toggleStar(n.props.url,!n.props.starred);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),n}return Object(i.a)(a,[{key:"render",value:function(){var e=23;return null!==this.props.size&&(e=this.props.size),Object(k.jsx)("div",{onClick:this.toggleStar,children:this.props.starred?Object(k.jsx)("div",{className:"contact-star starred",children:Object(k.jsx)(w.a,{style:{fontSize:e}})}):Object(k.jsx)("div",{className:"contact-star unstarred",children:Object(k.jsx)(C.a,{style:{fontSize:e}})})})}}]),a}(r.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getProfileIcon=function(){return(n.props.contact.firstName&&n.props.contact.firstName[0])+(n.props.contact.lastName&&n.props.contact.lastName[0])},n.editContact=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.push({pathname:"".concat(n.props.match.url.replace(/\/$/g,""),"/edit/").concat(n.props.contact.id),url:n.props.contact.url});case 1:case"end":return e.stop()}}),e)}))),n.state={entries:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){for(var e=["organisation","role"],t=[],a=0,n=Object.entries(this.props.contact);a<n.length;a++){var r=Object(O.a)(n[a],2),s=r[0],c=r[1];e.includes(s)&&t.push({label:s,value:c})}this.setState({entries:t})}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"rcorners group-contact-card",onClick:this.editContact,children:[Object(k.jsxs)("div",{className:"contact-card-title",children:[Object(k.jsxs)("div",{className:"left-col",children:[Object(k.jsx)("div",{className:"dot",children:Object(k.jsx)("div",{className:"centeredInDot",children:this.getProfileIcon()})}),Object(k.jsxs)("div",{children:[this.props.contact.firstName," ",this.props.contact.lastName]})]}),Object(k.jsx)("div",{className:"right-col",children:Object(k.jsx)(y,{starred:this.props.contact.starred,url:this.props.contact.url})})]}),Object(k.jsx)("div",{className:"",children:Object(k.jsx)("table",{className:"contact-details",children:this.state.entries.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:e.label}),Object(k.jsx)("td",{children:e.value})]})}))})})]})}}]),a}(r.a.Component),S=Object(p.i)(N),I=a(65),H=a(100),E=a(15),P=a(273),L=a(274),A=a(269),F=a(271),D=a(272),T=a(270),B=a(98),V=a.n(B),z=a(240),R=(a(78),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){e.props.onChange(t)},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"input-field",children:[Object(k.jsx)("div",{className:"label",children:Object(k.jsx)("label",{id:this.props.name,htmlFor:this.props.name,children:this.props.label})}),Object(k.jsx)("input",{id:this.props.name,type:this.props.type,name:this.props.name,placeholder:this.props.placeholder,onChange:this.onChange,value:this.props.value}),Object(k.jsx)("div",{className:"input-error",children:this.props.error})]})}}]),a}(r.a.Component)),U=R,M=(a(146),["children","classes","onClose"]),G=Object(E.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(H.a)(e,M);return Object(k.jsxs)(A.a,Object(I.a)(Object(I.a)({disableTypography:!0,className:a.root},r),{},{children:[Object(k.jsx)(z.a,{variant:"h6",children:t}),n?Object(k.jsx)(T.a,{"aria-label":"close",className:a.closeButton,onClick:n,children:Object(k.jsx)(V.a,{})}):null]}))})),_=Object(E.a)((function(e){return{root:{padding:e.spacing(2)}}}))(F.a),J=Object(E.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(D.a);function W(){var e=r.a.useState(!1),t=Object(O.a)(e,2),a=t[0],n=t[1],s=function(){n(!1)};return Object(k.jsxs)("div",{children:[Object(k.jsx)(P.a,{color:"primary",onClick:function(){n(!0)},children:"+ Add Contact"}),Object(k.jsxs)(L.a,{onClose:s,"aria-labelledby":"customized-dialog-title",open:a,children:[Object(k.jsx)(G,{id:"customized-dialog-title",onClose:s,children:"Contact Details"}),Object(k.jsx)(_,{dividers:!0,children:Object(k.jsxs)("div",{class:"split",children:[Object(k.jsx)("div",{children:"First Name"}),Object(k.jsx)(U,{}),Object(k.jsx)("div",{children:"Last Name"}),Object(k.jsx)(U,{}),Object(k.jsx)("div",{children:"Group"}),Object(k.jsx)(U,{}),Object(k.jsx)("div",{children:"Email Address"}),Object(k.jsx)(U,{}),Object(k.jsx)("div",{children:"Phone Number"}),Object(k.jsx)(U,{}),Object(k.jsx)("div",{children:"Notes"}),Object(k.jsx)(U,{})]})}),Object(k.jsxs)(J,{children:[Object(k.jsx)(P.a,{autoFocus:!0,onClick:s,color:"primary",children:"Delete"}),Object(k.jsx)(P.a,{autoFocus:!0,onClick:s,color:"primary",children:"Save"})]})]})]})}var K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsx)("div",{class:"add-contact-card",children:Object(k.jsx)("div",{class:"center iris60",children:Object(k.jsx)(W,{})})})}}]),a}(r.a.Component),$=a(37),X={position:"fixed",left:0,top:0,bottom:0,right:0,backgroundColor:"rgba(0,0,0,.5)"},Y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(s.createPortal)(Object(k.jsx)("div",{style:X,onClick:this.props.onClick,children:this.props.children}),document.getElementById("modal_root"))}}]),a}(r.a.Component),q=(a(151),a(17)),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){e.props.onChange(t)},e.onLabelChange=function(t){e.props.onLabelChange(t)},e.onDeleteChange=function(){e.props.onDeleteChange(e.props.name)},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"input-field custom-input-field",children:[Object(k.jsxs)("div",{className:"label",children:[Object(k.jsx)("label",{for:this.props.name,children:Object(k.jsx)("input",{type:"text",className:"custom-input-label",name:this.props.name,value:this.props.label,onChange:this.onLabelChange})}),Object(k.jsx)(q.d,{className:"delete-button",id:this.props.name,onClick:this.onDeleteChange})]}),Object(k.jsx)("input",{type:"text",name:this.props.name,placeholder:this.props.placeholder,onChange:this.onChange,value:this.props.value}),Object(k.jsx)("div",{className:"input-error",children:this.props.error})]})}}]),a}(r.a.Component),Z=Q,ee=(a(79),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onHiddenInputClick=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.onChange(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFileSelect=function(e){n.hiddenInputRef.current.click()},n.getInitials=function(){return(n.props.firstName&&n.props.firstName[0])+(n.props.lastName&&n.props.lastName[0])},n.hiddenInputRef=r.a.createRef(),n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"profile-photo-row",children:Object(k.jsxs)("div",{className:"profile-photo",onClick:this.onFileSelect,children:[""===this.props.src?Object(k.jsx)("div",{className:"large-profile-initials",children:Object(k.jsx)("div",{className:"large-initials",children:this.getInitials()})}):Object(k.jsx)("img",{src:this.props.src,alt:this.props.alt}),Object(k.jsx)("div",{className:"overlay-icon",children:Object(k.jsx)(q.c,{})}),Object(k.jsx)("input",{className:"invisible-button",type:"file",accept:"image/png, image/jpeg",onChange:this.onHiddenInputClick,ref:this.hiddenInputRef})]})})}}]),a}(r.a.Component)),te=ee,ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).proceed=function(){return!0},n.changeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState(Object(b.a)({},t.target.name,t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.customChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.customInput,r=parseInt(t.target.name),a[r]={label:n.state.customInput[r].label,value:t.target.value},n.setState({customInput:a,buttonDisabled:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.customLabelChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.customInput,r=parseInt(t.target.name),a[r]={label:t.target.value,value:n.state.customInput[r].value},n.setState({customInput:a,buttonDisabled:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getCustomFields=function(){var e,t=[],a=Object($.a)(n.state.customInput.entries());try{for(a.s();!(e=a.n()).done;){var r=Object(O.a)(e.value,2),s=r[0],c=r[1];t.push(Object(k.jsx)(Z,{listId:s,label:c.label,type:"text",placeholder:"Enter field value",value:c.value,name:s,onChange:n.customChangeHandler,onLabelChange:n.customLabelChangeHandler,onDeleteChange:n.deleteCustomField},s))}}catch(o){a.e(o)}finally{a.f()}return t},n.addCustomField=function(){var e=n.state.customInput;e.push({label:"Label",value:""}),n.setState({customInput:e})},n.deleteCustomField=function(e){var t=n.state.customInput;t.splice(e,1),n.setState({customInput:t})},n.save=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.editContact(n.state.url,{firstName:n.state.firstName,lastName:n.state.lastName,email:n.state.email,organisation:n.state.organisation,role:n.state.role,phone:n.state.phone});case 2:t=(t=(t=n.props.match.url).substring(0,t.lastIndexOf("/"))).substring(0,t.lastIndexOf("/")),n.props.history.push(t),window.location.reload();case 7:case"end":return e.stop()}}),e)}))),n.state={url:"",loading:!0,starred:!1,photoURL:"",firstName:"",lastName:"",email:"",organisation:"",role:"",phone:"",emailError:"",emailValid:!0,customInput:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://team-69-backend.herokuapp.com/crm/contacts/",t="https://team-69-backend.herokuapp.com/crm/contacts/"+this.props.match.params.id+"/",e.next=4,g.getContact(t);case 4:a=e.sent,this.setState({url:t,starred:a.starred,loading:!1,photoURL:"",firstName:a.firstName,lastName:a.lastName,email:a.emailAddress,organisation:a.organisation,role:a.role,phone:a.phoneNumber});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null===this.state.contact?Object(k.jsx)(Y,{onClick:function(){e.props.history.goBack()},children:"Loading..."}):Object(k.jsx)(Y,{children:Object(k.jsx)("div",{className:"edit-contact-modal",onClick:function(){},children:Object(k.jsxs)("div",{className:"edit-contact-card",children:[Object(k.jsxs)("div",{className:"form-area",children:[Object(k.jsx)("div",{className:"edit-contact-row",children:Object(k.jsx)(y,{starred:this.state.starred,url:this.state.url,size:30})}),Object(k.jsx)(te,{src:this.state.photoURL,alt:"contact profile photo",firstName:this.state.firstName,lastName:this.state.lastName}),Object(k.jsx)(U,{type:"text",name:"firstName",label:"First Name",placeholder:"e.g. Jane",onChange:this.changeHandler,value:this.state.firstName}),Object(k.jsx)(U,{type:"text",name:"lastName",label:"Last Name",placeholder:"e.g. Doe",onChange:this.changeHandler,value:this.state.lastName}),Object(k.jsx)(U,{type:"email",name:"email",label:"Email Address",placeholder:"e.g. jane.doe@email.com",onChange:this.changeHandler,value:this.state.email}),Object(k.jsx)(U,{type:"text",name:"organisation",label:"Organisation",placeholder:"e.g. Hogwarts",onChange:this.changeHandler,value:this.state.organisation}),Object(k.jsx)(U,{type:"text",name:"role",label:"Role",placeholder:"e.g. Wizard",onChange:this.changeHandler,value:this.state.role}),Object(k.jsx)(U,{type:"text",name:"phone",label:"Phone Number",placeholder:"e.g. +61 302 203 392",onChange:this.changeHandler,value:this.state.phone}),this.getCustomFields(),Object(k.jsx)("div",{className:"new-field-button",onClick:this.addCustomField,children:"+ New Field"})]}),Object(k.jsxs)("div",{className:"button-row",children:[Object(k.jsx)("button",{className:"secondary-button button",type:"button",name:"cancel",onClick:function(){e.props.history.goBack()},children:"Cancel"}),Object(k.jsx)("button",{className:"primary-button button",type:"button",name:"save",disabled:!this.proceed(),onClick:this.save,children:"Save"})]})]})})})}}]),a}(r.a.Component),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setSearchTerm=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.componentDidMount=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getGroups();case 2:t=e.sent,console.log(t),n.setState({groups:t,isLoaded:!0});case 5:case"end":return e.stop()}}),e)}))),n.state={groups:[],isLoaded:!1,searchTerm:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.state.isLoaded?Object(k.jsxs)("div",{children:[Object(k.jsx)(p.b,{exact:!0,path:"/groups/edit/:id",component:ae}),Object(k.jsxs)("div",{className:"groups-area",children:[Object(k.jsx)("input",{type:"text",name:"searchTerm",placeholder:"Search...",onChange:this.setSearchTerm}),this.state.groups.map((function(t){return Object(k.jsxs)("div",{className:"group-area",children:[Object(k.jsx)("div",{className:"title",children:t.name}),Object(k.jsx)(v.a,{triggerClassName:"trigger-text",trigger:"Expand",triggerOpenedClassName:"trigger-text",triggerWhenOpen:"Collapse",open:!0,children:Object(k.jsxs)("div",{className:"contact-card-area",children:[t.contactObjects.filter((function(t){return""===e.state.searchTerm||t.firstName.toLowerCase().includes(e.state.searchTerm.toLowerCase())?t:void 0})).map((function(e,t){return Object(k.jsx)("div",{className:"user",children:Object(k.jsx)(S,{contact:e})},t)})),Object(k.jsx)(K,{})]})})]})}))]})]}):Object(k.jsx)("div",{children:"Loading..."})}}]),a}(r.a.Component),re=(a(47),"https://team-69-backend.herokuapp.com/crm/"),se=sessionStorage.getItem("userId"),ce=re+"useraccounts/"+se+"/",oe=re+"userprofiles/"+se+"/",ie=function e(){Object(o.a)(this,e)};ie.getUserProfile=Object(m.a)(j.a.mark((function e(){var t,a,n,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors"},e.next=3,fetch(ce,t);case 3:return a=e.sent,e.next=6,fetch(oe,t);case 6:return n=e.sent,e.next=9,a.json();case 9:return r=e.sent,e.next=12,n.json();case 12:return s=e.sent,r.organisation=s.organisation,r.role=s.role,r.phone=s.phoneNumber,r.image=s.image,sessionStorage.setItem("image",r.image),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e)}))),ie.getProfileIcon=Object(m.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors"},e.next=3,fetch(oe,t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),ie.updateProfile=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("id",se),a.append("url",oe),a.append("userAccount",ce),a.append("first_name",t.firstName),a.append("last_name",t.lastName),a.append("email",t.email),a.append("organisation",t.organisation),a.append("role",t.role),a.append("phoneNumber",t.phone),null!==t.image&&a.append("image",t.image),n={method:"PATCH",headers:{Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors",body:a},e.next=14,fetch(ce,n);case 14:return e.next=16,fetch(oe,n);case 16:return e.abrupt("return",{success:!0});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie.getCustomFields=Object(m.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=oe+"fields/",a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors"},e.next=4,fetch(t,a);case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)}))),ie.updateCustomFields=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=oe+"fields/",n=Object($.a)(t);try{for(n.s();!(r=n.n()).done;)r.value.userAccount=se}catch(c){n.e(c)}finally{n.f()}return s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"token ".concat(sessionStorage.getItem("token"))},mode:"cors",body:JSON.stringify({fields:t})},e.next=6,fetch(a,s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var le=ie,ue=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).toggleMenu=function(){"inactive"===n.state.dropdown?n.setState({dropdown:"active",mode:"on"}):n.setState({dropdown:"inactive",mode:"off"})},n.logout=function(){sessionStorage.clear()},n.state={url:"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/217078i525F6A9EF292601F/image-size/large?v=v2&px=999",dropdown:"inactive",mode:"off"},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{class:"profile-dropdown",children:[Object(k.jsx)("img",{className:"profile-icon "+this.state.mode,src:this.state.url,alt:"User profile picture",onClick:this.toggleMenu}),Object(k.jsx)("div",{className:"dropdown "+this.state.dropdown,children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("a",{href:"/groups",children:Object(k.jsx)("li",{children:"Home"})}),Object(k.jsx)("a",{href:"/profile",children:Object(k.jsx)("li",{children:"Profile"})}),Object(k.jsx)("a",{href:"/events",children:Object(k.jsx)("li",{children:"Events"})}),Object(k.jsx)("a",{href:"/settings",children:Object(k.jsx)("li",{children:"Settings"})}),Object(k.jsx)("a",{href:"/auth/logout",children:Object(k.jsx)("li",{onClick:this.logout,children:"Logout"})})]})})]})}}]),a}(r.a.Component),de=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).toggleMenu=function(){"inactive"===n.state.dropdown?n.setState({dropdown:"active",mode:"on"}):n.setState({dropdown:"inactive",mode:"off"})},n.state={dropdown:"inactive",mode:"off",notifications:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadData(),setInterval(this.loadData,3e4)}},{key:"loadData",value:function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{""}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"notification-dropdown",children:[Object(k.jsx)("div",{className:"icon "+this.state.mode,onClick:this.toggleMenu,children:Object(k.jsx)(q.b,{})}),Object(k.jsx)("div",{className:"dropdown "+this.state.dropdown,children:Object(k.jsx)("ul",{children:0===this.state.notifications.length?Object(k.jsx)("li",{children:"No new notifications"}):this.state.notifications.map((function(e){return Object(k.jsx)("li",{children:e})}))})})]})}}]),a}(r.a.Component),pe=de,he=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={popularity:"1,428"},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"popularity-dropdown",children:[Object(k.jsx)("div",{className:"popularity",children:this.state.popularity}),Object(k.jsx)("div",{className:"tool-tip",children:"Accumulate points as others download your contact information!"})]})}}]),a}(r.a.Component),je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onClick=function(){"off"===n.state.mode?n.setState({mode:"on",light:"inactive",dark:"active"}):n.setState({mode:"off",light:"active",dark:"inactive"})},n.state={mode:"off",light:"active",dark:"inactive"},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"icon "+this.state.mode,onClick:this.onClick,children:[Object(k.jsx)(q.e,{className:this.state.dark}),Object(k.jsx)(q.h,{className:this.state.light})]})}}]),a}(r.a.Component),me=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsx)("header",{children:Object(k.jsxs)("div",{className:"header-content",children:[Object(k.jsx)("div",{className:"left-header",children:Object(k.jsx)("a",{href:"/groups",children:"Logo and App Name"})}),Object(k.jsxs)("div",{className:"right-header",children:[Object(k.jsx)(he,{}),Object(k.jsx)(je,{}),Object(k.jsx)(pe,{}),Object(k.jsx)(ue,{})]})]})})}}]),a}(r.a.Component),be=me,fe=(a(152),a(153),a(154),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).leftOnClick=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.location.pathname!==n.state.leftLink&&(n.props.history.push(n.state.leftLink),n.setState({leftButtonState:"selected",rightButtonState:"deselected"}));case 1:case"end":return e.stop()}}),e)}))),n.rightOnClick=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.location.pathname!==n.state.rightLink&&(n.props.history.push(n.state.rightLink),n.setState({leftButtonState:"deselected",rightButtonState:"selected"}));case 1:case"end":return e.stop()}}),e)}))),n.state={leftButtonState:"",rightButtonState:"",leftLink:"/groups",rightLink:"/contacts"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.history.location.pathname===this.state.rightLink?this.setState({leftButtonState:"deselected",rightButtonState:"selected"}):this.setState({leftButtonState:"selected",rightButtonState:"deselected"})}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"two-select-button",children:[Object(k.jsxs)("div",{className:"left "+this.state.leftButtonState,onClick:this.leftOnClick,children:[Object(k.jsx)(q.a,{})," Groups"]}),Object(k.jsxs)("div",{className:"right "+this.state.rightButtonState,onClick:this.rightOnClick,children:[Object(k.jsx)(q.i,{})," Contacts"]})]})}}]),a}(r.a.Component)),ve=Object(p.i)(fe),Oe=(a(155),r.a.Component,function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"options-bar",children:[Object(k.jsx)("div",{className:"left-items",children:Object(k.jsx)(ve,{})}),Object(k.jsxs)("div",{className:"right-items",children:[Object(k.jsx)("button",{className:"button primary-button",id:"add-contact-button",onClick:this.newContactOnclick,children:"NEW CONTACT"}),Object(k.jsx)("button",{className:"button primary-button",id:"add-contact-button-small",onClick:this.newContactOnclick,children:Object(k.jsx)(q.f,{})})]})]})}}]),a}(r.a.Component)),ge=Oe,xe=(a(66),a(67),a(58)),we=a(0),Ce="https://team-69-backend.herokuapp.com/crm/";function ke(e){var t=Object(n.useState)(!0),a=Object(O.a)(t,2),r=a[0],s=(a[1],Object(n.useState)(!0)),c=Object(O.a)(s,2),o=c[0],i=(c[1],Object(n.useState)(!0)),l=Object(O.a)(i,2),u=l[0],d=(l[1],Object(n.useState)(!0)),h=Object(O.a)(d,2),b=h[0],f=(h[1],Object(n.useState)(!0)),v=Object(O.a)(f,2),g=v[0],x=(v[1],Object(n.useState)(!1)),w=Object(O.a)(x,2),C=(w[0],w[1],Object(p.h)()),y=Object(p.g)(),N=Object(n.useState)([]),S=Object(O.a)(N,2),I=S[0],H=S[1];function E(e){var t=e.firstName[0],a=e.lastName[0];return Object(k.jsxs)("div",{class:"initials",children:[t,a]})}return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+btoa(sessionStorage.getItem("username")+":"+sessionStorage.getItem("password"))},mode:"cors"},e.next=3,fetch(Ce+"contacts/",a);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log(r),H(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}()}),[]),Object(k.jsxs)("div",{children:[Object(k.jsx)(p.b,{exact:!0,path:"/contacts/edit/:id",component:ae}),Object(k.jsxs)("div",{class:"person d-flex",children:[Object(k.jsx)("div",{class:"w-2"}),Object(k.jsx)("div",{class:"w-2",children:Object(k.jsx)(we.b.Provider,{value:{color:"a4a6f6"},children:Object(k.jsx)(xe.a,{})})}),Object(k.jsx)("div",{class:"w-10"}),Object(k.jsx)("div",{class:"w-10",children:"Groups"}),r?Object(k.jsx)("div",{class:"w-10",children:"Organisation"}):null,o?Object(k.jsx)("div",{class:"w-10",children:"Role"}):null,u?Object(k.jsx)("div",{class:"w-10",children:"Email"}):null,b?Object(k.jsx)("div",{class:"w-10",children:"Phone"}):null,g?Object(k.jsx)("div",{class:"w-15",children:"Notes"}):null,Object(k.jsx)("div",{class:"w-5 text-right",children:"Edit"})]}),I.map((function(e,t){var a=t%2;return Object(k.jsxs)("div",{class:"person d-flex white space-around color-"+a,children:[Object(k.jsx)("div",{class:"w-2",children:E(e)}),Object(k.jsx)("div",{class:"w-2",children:e.starred?Object(k.jsx)("div",{class:"w-2",children:Object(k.jsx)(we.b.Provider,{value:{color:"#df5571"},children:Object(k.jsx)(xe.a,{})})}):Object(k.jsx)("div",{class:"w-2",children:Object(k.jsx)(we.b.Provider,{value:{color:"a4a6f6"},children:Object(k.jsx)(xe.b,{})})})}),Object(k.jsxs)("div",{class:"w-10",children:[e.firstName," ",e.lastName]}),Object(k.jsx)("div",{class:"w-10",children:"Groups"}),r?Object(k.jsx)("div",{class:"w-10",children:e.organisation}):null,o?Object(k.jsx)("div",{class:"w-10",children:e.role}):null,u?Object(k.jsx)("div",{class:"w-10",children:Object(k.jsx)("a",{href:"mailto:"+e.emailAddress,children:e.emailAddress})}):Object(k.jsx)("div",{}),b?Object(k.jsx)("div",{class:"w-10",children:e.phoneNumber}):null,g?Object(k.jsx)("div",{class:"w-15",children:e.notes}):null,Object(k.jsx)("div",{class:"w-5 text-right",onClick:function(){y.push({pathname:"".concat(C.pathname.replace(/\/$/g,""),"/edit/").concat(e.id),url:e.url})},children:"Edit"})]},t)}))]})}var ye=a(99),Ne=a.n(ye),Se=function e(){Object(o.a)(this,e)};Se.emailChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne.a.isEmail(t)?(a="",n=!0):(a="Email invalid!",n=!1),e.abrupt("return",{error:a,valid:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se.nameChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>=2?(a="",n=!0):(a="Enter valid name!",n=!1),e.abrupt("return",{error:a,valid:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se.passwordChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a(234),(c=new s).is().min(8).is().max(100).has().uppercase().has().lowercase().has().digits(1).has().not().spaces(),c.validate(t)?(n="",r=!0):(n="Password invalid! Valid password must contain at least 8 characters with uppercase, lowercase and digits, and must not contain any spaces.",r=!1),e.abrupt("return",{error:n,valid:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se.confirmPasswordChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t,a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t===a?(n="",r=!0):(n="Passwords do not match.",r=!1),e.abrupt("return",{error:n,valid:r});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Se.loginUser=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.setItem("userId",t.id),sessionStorage.setItem("username",t.username),sessionStorage.setItem("token",t.token),e.next=5,le.getProfileIcon();case 5:a=e.sent,sessionStorage.setItem("image",a.image);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ie=Se,He="https://team-69-backend.herokuapp.com/crm/",Ee=function e(){Object(o.a)(this,e)};Ee.checkEmail=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He+"api-auth/checkemail/",a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",body:JSON.stringify({email:t})},e.next=4,fetch("https://team-69-backend.herokuapp.com/crm/api-auth/checkemail/",a);case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee.signup=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He+"useraccounts/",a={username:t.email,email:t.email,password:t.password,first_name:t.first_name,last_name:t.last_name},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",body:JSON.stringify(a)},e.next=5,fetch("https://team-69-backend.herokuapp.com/crm/useraccounts/",n);case 5:return e.next=7,Ee.login(t);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee.login=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He+"api-auth/alt-login/",console.log(t),a={method:"POST",headers:{Accept:"*/*","Content-Type":"application/json"},mode:"cors",body:JSON.stringify({username:t.email,password:t.password})},e.next=5,fetch("https://team-69-backend.herokuapp.com/crm/api-auth/alt-login/",a);case 5:return n=e.sent,e.abrupt("return",n.json());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Pe=Ee,Le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).changeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:return e.next=4,Ie.emailChangeHandler(n.state.email);case 4:a=e.sent,n.setState({emailError:a.error,emailValid:a.valid});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.nextHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,r,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:n.state.email},e.next=3,Pe.checkEmail(n.state.email);case 3:r=e.sent,s=r.success,c="",c=s?"/auth/login":"/auth/signup",n.props.history.push({pathname:c,state:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",emailError:"",emailValid:!1},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"auth-form",children:[Object(k.jsx)(U,{name:"email",value:this.state.email,label:"Email Address",placeholder:"e.g. jane.doe@gmail.com",type:"email",onChange:this.changeHandler,disabled:"false",error:this.state.emailError}),Object(k.jsxs)("div",{className:"button-row",children:[Object(k.jsx)("button",{className:"invisible-button",type:"button",disabled:!0}),Object(k.jsx)("button",{className:"primary-button",type:"button",name:"next",disabled:!this.state.emailValid,onClick:this.nextHandler,children:"NEXT"})]})]})}}]),a}(r.a.Component),Ae=Le,Fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).emailChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:return e.next=4,Ie.emailChangeHandler(n.state.email);case 4:a=e.sent,n.setState({emailError:a.error,emailValid:a.valid});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.nameChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,r,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:return r=t.target.name+"Error",s=t.target.name+"Valid",e.next=6,Ie.nameChangeHandler(t.target.value);case 6:c=e.sent,n.setState((a={},Object(b.a)(a,r,c.error),Object(b.a)(a,s,c.valid),a));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.passwordChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:return e.next=4,Ie.passwordChangeHandler(t.target.value);case 4:return a=e.sent,n.setState({passwordError:a.error,passwordValid:a.valid}),e.next=8,Ie.confirmPasswordChangeHandler(n.state.password,n.state.confirmPassword);case 8:r=e.sent,n.setState({confirmPasswordError:r.error,confirmPasswordValid:r.valid});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.confirmPasswordChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:return e.next=4,Ie.confirmPasswordChangeHandler(n.state.password,n.state.confirmPassword);case 4:a=e.sent,n.setState({confirmPasswordError:a.error,confirmPasswordValid:a.valid});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.proceed=function(){return n.state.emailValid&&n.state.firstNameValid&&n.state.lastNameValid&&n.state.passwordValid&&n.state.confirmPasswordValid},n.backHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.goBack();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.nextHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.signup({email:n.state.email,password:n.state.password,first_name:n.state.firstName,last_name:n.state.lastName});case 2:if(!(a=e.sent)||!a.success){e.next=11;break}return e.next=6,Ie.loginUser(a);case 6:sessionStorage.setItem("username",a.username),sessionStorage.setItem("password",n.state.password),n.props.history.push("/groups"),e.next=12;break;case 11:n.setState({failed:n.state.errorMessage,emailValid:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={email:e.location.state.email,firstName:"",lastName:"",password:"",confirmPassword:"",emailError:"",firstNameError:"",lastNameError:"",passwordError:"",confirmPasswordError:"",emailValid:!0,firstNameValid:!1,lastNameValid:!1,passwordValid:!1,confirmPasswordValid:!1,errorMessage:"Email already associated with existing account. Try again with a different email address. ",failed:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"auth-form",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)(U,{name:"email",value:this.state.email,label:"Email Address",placeholder:"e.g. jane.doe@gmail.com",type:"email",onChange:this.emailChangeHandler,disabled:"false",error:this.state.emailError}),Object(k.jsx)(U,{name:"firstName",value:this.state.firstName,label:"First Name",placeholder:"e.g. Jane",type:"text",onChange:this.nameChangeHandler,disabled:"false",error:this.state.firstNameError}),Object(k.jsx)(U,{name:"lastName",value:this.state.lasttName,label:"Last Name",placeholder:"e.g. Doe",type:"text",onChange:this.nameChangeHandler,disabled:"false",error:this.state.lastNameError}),Object(k.jsx)(U,{name:"password",value:this.state.password,label:"Password",placeholder:"*************",type:"password",onChange:this.passwordChangeHandler,disabled:"false",error:this.state.passwordError}),Object(k.jsx)(U,{name:"confirmPassword",value:this.state.confirmPassword,label:"Confirm Password",placeholder:"*************",type:"password",onChange:this.confirmPasswordChangeHandler,disabled:"false",error:this.state.confirmPasswordError})]}),Object(k.jsx)("div",{className:"input-error",children:this.state.failed}),Object(k.jsxs)("div",{className:"button-row",children:[Object(k.jsx)("button",{className:"secondary-button",type:"button",name:"next",onClick:this.backHandler,children:"BACK"}),Object(k.jsx)("button",{className:"primary-button",type:"button",name:"next",disabled:!this.proceed(),onClick:this.nextHandler,children:"SIGN UP"})]})]})}}]),a}(r.a.Component),De=Fe,Te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).emailChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:return e.next=4,Ie.emailChangeHandler(n.state.email);case 4:a=e.sent,n.setState({emailError:a.error,emailValid:a.valid});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.passwordChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:t.target.value?n.setState({passwordValid:!0}):n.setState({passwordValid:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.proceed=function(){return n.state.emailValid&&n.state.passwordValid},n.backHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.history.goBack();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.nextHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.login({email:n.state.email,password:n.state.password});case 2:if(!("id"in(a=e.sent))){e.next=11;break}return e.next=6,Ie.loginUser(a);case 6:sessionStorage.setItem("username",a.username),sessionStorage.setItem("password",n.state.password),n.props.history.push("/groups"),e.next=12;break;case 11:n.setState({failed:n.state.errorMessage});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={email:e.location.state.email,password:"",emailError:"",passwordError:"",emailValid:!0,passwordValid:!1,errorMessage:"Incorrect email address or password. Please try again.",failed:""},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"auth-form",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)(U,{name:"email",value:this.state.email,label:"Email Address",placeholder:"e.g. jane.doe@gmail.com",type:"email",onChange:this.emailChangeHandler,disabled:"false",error:this.state.emailError}),Object(k.jsx)(U,{name:"password",value:this.state.password,label:"Password",placeholder:"*************",type:"password",onChange:this.passwordChangeHandler,disabled:"false",error:this.state.passwordError})]}),Object(k.jsx)("div",{className:"input-error",children:this.state.failed}),Object(k.jsxs)("div",{className:"button-row",children:[Object(k.jsx)("button",{className:"secondary-button",type:"button",name:"next",onClick:this.backHandler,children:"BACK"}),Object(k.jsx)("button",{className:"primary-button",type:"button",name:"next",disabled:!this.proceed(),onClick:this.nextHandler,children:"LOGIN"})]})]})}}]),a}(r.a.Component);Te.email="";var Be=Te,Ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).changeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState((a={},Object(b.a)(a,t.target.name,t.target.value),Object(b.a)(a,"buttonDisabled",!1),a)),n.preventBlankLabel();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.customChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.customInput,r=parseInt(t.target.name),a[r]={label:n.state.customInput[r].label,value:t.target.value},n.setState({customInput:a,buttonDisabled:!1}),n.preventBlankLabel();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.customLabelChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.customInput,r=parseInt(t.target.name),a[r]={label:t.target.value,value:n.state.customInput[r].value},n.setState({customInput:a,buttonDisabled:!1}),n.preventBlankLabel();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.preventBlankLabel=function(){var e,t=Object($.a)(n.state.customInput);try{for(t.s();!(e=t.n()).done;){""===e.value.label.trim()&&n.setState({buttonDisabled:!0})}}catch(a){t.e(a)}finally{t.f()}},n.emailChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState(Object(b.a)({},t.target.name,t.target.value));case 2:return e.next=4,Ie.emailChangeHandler(n.state.email);case 4:a=e.sent,n.setState({emailError:a.error,emailValid:a.valid,buttonDisabled:!1}),n.preventBlankLabel();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.photoChangeHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=URL.createObjectURL(t.target.files[0]),n.setState({photoURL:a,buttonDisabled:!1,image:t.target.files[0]}),n.preventBlankLabel();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getFields=function(){return[Object(k.jsx)(U,{type:"text",name:"firstName",label:"First Name",placeholder:"e.g. Jane",onChange:n.changeHandler,value:n.state.firstName}),Object(k.jsx)(U,{type:"text",name:"lastName",label:"Last Name",placeholder:"e.g. Doe",onChange:n.changeHandler,value:n.state.lastName}),Object(k.jsx)(U,{type:"email",name:"email",label:"Email Address",placeholder:"e.g. jane.doe@email.com",onChange:n.emailChangeHandler,value:n.state.email}),Object(k.jsx)(U,{type:"text",name:"organisation",label:"Organisation",placeholder:"e.g. Hogwarts",onChange:n.changeHandler,value:n.state.organisation}),Object(k.jsx)(U,{type:"text",name:"role",label:"Role",placeholder:"e.g. Wizard",onChange:n.changeHandler,value:n.state.role}),Object(k.jsx)(U,{type:"text",name:"phone",label:"Phone Number",placeholder:"e.g. +61 302 203 392",onChange:n.changeHandler,value:n.state.phone})]},n.getLeftCol=function(){var e=n.getFields().concat(n.getCustomFields()),t=Math.floor((e.length+1)/2);return e.slice(0,t).map((function(e){return e}))},n.getRightCol=function(){var e=n.getFields().concat(n.getCustomFields()),t=Math.floor((e.length+1)/2);return e.slice(t,e.length).map((function(e){return e}))},n.getCustomFields=function(){var e,t=[],a=Object($.a)(n.state.customInput.entries());try{for(a.s();!(e=a.n()).done;){var r=Object(O.a)(e.value,2),s=r[0],c=r[1];t.push(Object(k.jsx)(Z,{listId:s,label:c.label,type:"text",placeholder:"Enter field value",value:c.value,name:s,onChange:n.customChangeHandler,onLabelChange:n.customLabelChangeHandler,onDeleteChange:n.deleteCustomField},s))}}catch(o){a.e(o)}finally{a.f()}return t},n.addCustomField=function(){var e=n.state.customInput;e.push({label:"Label",value:""}),n.setState({customInput:e,buttonDisabled:!1}),n.preventBlankLabel()},n.deleteCustomField=function(e){var t=n.state.customInput;t.splice(e,1),n.setState({customInput:t,buttonDisabled:!1}),n.preventBlankLabel()},n.saveHandler=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.updateProfile({firstName:n.state.firstName,lastName:n.state.lastName,email:n.state.email,organisation:n.state.organisation,role:n.state.role,phone:n.state.phone,image:n.state.image});case 2:return e.next=4,le.updateCustomFields(n.state.customInput);case 4:n.setState({buttonDisabled:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={buttonDisabled:!0,photoURL:"",firstName:"",lastName:"",email:"",organisation:"",role:"",phone:"",link:"",emailError:"",emailValid:!0,customInput:[],defaultPhotoURL:"https://techcommunity.microsoft.com/t5/image/serverpage/image-id/217078i525F6A9EF292601F/image-size/large?v=v2&px=999",image:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.getUserProfile();case 2:return t=e.sent,e.next=5,le.getCustomFields();case 5:a=e.sent,this.setState({photoURL:null===t.image?this.state.defaultPhotoURL:t.image,firstName:t.first_name,lastName:t.last_name,email:t.email,organisation:t.organisation,role:t.role,phone:t.phone,customInput:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"profile-content",children:[Object(k.jsxs)("div",{className:"title-row",children:[Object(k.jsx)("h3",{children:"Public Information"}),Object(k.jsxs)("div",{className:"info-dropdown",children:[Object(k.jsx)("div",{className:"info",children:"What's this?"}),Object(k.jsx)("div",{className:"tool-tip",children:"Your public information may be downloaded by other users of this application."})]})]}),Object(k.jsx)(te,{src:this.state.photoURL,alt:"User Profile Photo",firstName:this.state.firstName,lastname:this.state.lastName,onChange:this.photoChangeHandler}),Object(k.jsxs)("div",{className:"form",children:[Object(k.jsx)("div",{className:"col left-col",children:this.getLeftCol()}),Object(k.jsxs)("div",{className:"col right-col",children:[this.getRightCol(),Object(k.jsx)("div",{className:"new-field-button",onClick:this.addCustomField,children:"+ New Field"})]})]}),Object(k.jsxs)("div",{className:"button-row",children:[Object(k.jsx)("button",{className:"invisible-button"}),Object(k.jsx)("button",{className:"primary-button",disabled:this.state.buttonDisabled,onClick:this.saveHandler,children:"SAVE"})]})]})}}]),a}(r.a.Component),ze=Ve,Re=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).isLoggedIn=function(){return null!==sessionStorage.getItem("userId")},n.contactsPage=function(){return Object(k.jsxs)("div",{children:[n.state.contactsOptionsBar,Object(k.jsx)(ke,{})]})},n.groupsPage=function(){return Object(k.jsxs)("div",{children:[n.state.contactsOptionsBar,Object(k.jsx)(ne,{})]})},n.state={contactsOptionsBar:Object(k.jsx)(ge,{})},n}return Object(i.a)(a,[{key:"render",value:function(){return Object(k.jsx)(d.a,{children:Object(k.jsxs)(p.d,{children:[this.isLoggedIn()?Object(k.jsx)(p.b,{exact:!0,path:"/",children:Object(k.jsx)(p.a,{to:"/groups"})}):Object(k.jsx)(p.b,{exact:!0,path:"/",component:Ae}),Object(k.jsx)(p.b,{exact:!0,path:"/auth/signup",component:De}),Object(k.jsx)(p.b,{exact:!0,path:"/auth/login",component:Be}),Object(k.jsx)(p.b,{exact:!0,path:"/auth/logout",children:Object(k.jsx)(p.a,{to:"/"})}),Object(k.jsxs)("div",{children:[Object(k.jsx)(be,{}),Object(k.jsx)(p.b,{exact:!0,path:"/profile",component:ze}),Object(k.jsx)(p.b,{path:"/groups",component:this.groupsPage}),Object(k.jsx)(p.b,{path:"/contacts",component:this.contactsPage})]})]})})}}]),a}(r.a.Component);var Ue=function(){return Object(k.jsx)("section",{className:"body",children:Object(k.jsx)("div",{children:Object(k.jsx)(Re,{})})})};c.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(Ue,{})}),document.getElementById("root"))},47:function(e,t,a){},69:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){}},[[238,1,2]]]);
//# sourceMappingURL=main.118ae69a.chunk.js.map